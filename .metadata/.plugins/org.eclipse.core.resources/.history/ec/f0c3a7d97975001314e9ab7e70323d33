var map;
var geocoder;

function mapInitialize() {
        var mapOptions = {
          center: new google.maps.LatLng(38.8951100	, -77.0363700),
          zoom: 3
        };
        map = new google.maps.Map(document.getElementById("woodlawn_map"), mapOptions);
        geocoder = new google.maps.Geocoder();
        var location = new google.maps.LatLng(43.906732, -69.963793);
        var image = 'Images/W_pin.png';

        var marker = new google.maps.Marker({
            position: location,
            map: map,
            icon: image,
            title:"Hello World!"
        });
        
        google.maps.event.addListener(marker, 'dblclick', function(event){
            map = marker.getMap();

            map.setCenter(overlay.getPosition()); // set map center to marker position
            smoothZoom(map, 12, map.getZoom()); // call smoothZoom, parameters map, final zoomLevel, and starting zoom level
        })

        var infowindow = new google.maps.InfoWindow({
        	  content:"Sawyer Bowman!"
       	});

        google.maps.event.addListener(marker, 'click', function() {
        	  infowindow.open(map,marker);
        });
      }

function codeAddress() {
	  var address = document.getElementById('address').value;
	  geocoder.geocode( { 'address': address}, function(results, status) {
	    if (status == google.maps.GeocoderStatus.OK) {
	      map.setCenter(results[0].geometry.location);
	      var marker = new google.maps.Marker({
	          map: map,
	          position: results[0].geometry.location
	      });
	    } else {
	      alert('Geocode was not successful for the following reason: ' + status);
	    }
	  });
	}

function smoothZoom (map, max, cnt) {
    if (cnt >= max) {
            return;
        }
    else {
        z = google.maps.event.addListener(map, 'zoom_changed', function(event){
            google.maps.event.removeListener(z);
            smoothZoom(map, max, cnt + 1);
        });
        setTimeout(function(){map.setZoom(cnt)}, 80); // 80ms is what I found to work well on my system -- it might not work well on all systems
    }
} 

google.maps.event.addDomListener(window, 'load', mapInitialize);
      